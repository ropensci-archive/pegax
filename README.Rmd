pegax
=====

```{r echo=FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  warning = FALSE
)
```

[![Build Status](https://travis-ci.org/ropenscilabs/pegax.svg?branch=master)](https://travis-ci.org/ropenscilabs/pegax)
[![codecov.io](https://codecov.io/github/ropenscilabs/pegax/coverage.svg?branch=master)](https://codecov.io/github/ropenscilabs/pegax?branch=master)


Taxonomy PEG (Parsing Expression Grammar) rules

## E.g.

```
struct name
  : plus< alpha >
{};

struct numbers
  : plus< digit >
{};

struct grammar
  : must< name, one< ',' >, space, numbers, eof >
{};
```

## Install

```{r eval=FALSE}
devtools::install_github("ropenscilabs/pegax")
```

```{r}
library("pegax")
```


## Parse authority

Author name

```{r}
authority_names("Linnaeus, 1758")
```

Author year

```{r}
authority_years("Linnaeus, 1758")
```

Moar

```{r}
x <- c('Smith, 1456', 'Foobarcheesestuff, 1001', 'Smith, 1987')
authority_names(x)
authority_years(x)
```

Even Moar

```{r}
library("charlatan")
per <- charlatan::PersonProvider$new()
date <- charlatan::DateTimeProvider$new()
x <- replicate(10^4, paste(
    sample(per$person$last_names, 1),
    date$year(),
    sep = ", "
  )
)
length(x)

# years
#plyr::llply(x, authority_years, .inform = TRUE)
authority_years(x)
system.time(authority_years(x))

# names
#plyr::llply(x, authority_names, .inform = TRUE)
authority_names(x)
system.time(authority_names(x))
```

## R DSL to make custom PEGS for taxonomy

not made yet - but we can dream

```
pegax({
  plus(alpha)
  one(,)
  numbers(,)
  plus(-)
  space
  plus(????)
  plus(:cat2:)
})
```
